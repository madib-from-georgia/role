# –£–ª—É—á—à–µ–Ω–∏—è PDF —ç–∫—Å–ø–æ—Ä—Ç–∞

## üé® –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –£–ª—É—á—à–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω PDF –æ—Ç—á–µ—Ç–æ–≤
- **–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
- **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã** –∏ —Ü–≤–µ—Ç–æ–≤—ã–µ —Å—Ö–µ–º—ã
- **–í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã** –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- **–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã** –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ—Å—Ç–∏ –º–æ–¥—É–ª–µ–π
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞** –¥–ª—è –ø–µ—á–∞—Ç–∏

### –°–∏—Å—Ç–µ–º–∞ —Ç–µ–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è
- **Professional** - –¥–µ–ª–æ–≤–æ–π —Å—Ç–∏–ª—å –¥–ª—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤
- **Creative** - —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω —Å —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
- **Minimal** - –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π —Å—Ç–∏–ª—å –¥–ª—è —á–∏—Å—Ç–æ–≥–æ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è
- **WeasyPrint** –¥–ª—è –≤—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ HTML –≤ PDF
- **Fallback –Ω–∞ ReportLab** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ WeasyPrint
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —à—Ä–∏—Ñ—Ç–æ–≤**
- **–£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –æ–ø–µ—Ä–∞—Ü–∏–π —ç–∫—Å–ø–æ—Ä—Ç–∞

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Å–µ PDF —ç–∫—Å–ø–æ—Ä—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–æ–≤—ã–π –¥–∏–∑–∞–π–Ω:
- –ö–Ω–æ–ø–∫–∞ "–≠–∫—Å–ø–æ—Ä—Ç PDF" –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
- API —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/export/character`
- –ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ `/api/characters/{id}/export/pdf`

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```python
from app.services.export_service import export_service

# –≠–∫—Å–ø–æ—Ä—Ç —Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ç–µ–º–æ–π
pdf_bytes = await export_service.export_character_pdf(
    character=character,
    checklists=checklists,
    format_type="detailed",
    user_id=user_id,
    use_weasyprint=True,
    theme="professional"
)

# –≠–∫—Å–ø–æ—Ä—Ç —Å —Ç–≤–æ—Ä—á–µ—Å–∫–æ–π —Ç–µ–º–æ–π
pdf_bytes = await export_service.export_character_pdf(
    character=character,
    checklists=checklists,
    format_type="summary",
    user_id=user_id,
    use_weasyprint=True,
    theme="creative"
)

# –≠–∫—Å–ø–æ—Ä—Ç —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —à—Ä–∏—Ñ—Ç–∞–º–∏
custom_fonts = {
    "MyFont": "/path/to/font.ttf"
}
pdf_bytes = await export_service.export_character_pdf(
    character=character,
    checklists=checklists,
    format_type="compact",
    user_id=user_id,
    use_weasyprint=True,
    theme="minimal",
    custom_fonts=custom_fonts
)
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
backend/app/templates/export/
‚îú‚îÄ‚îÄ character_detailed_weasy.html     # –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç (WeasyPrint)
‚îú‚îÄ‚îÄ character_summary_weasy.html      # –ö—Ä–∞—Ç–∫–∏–π –æ—Ç—á–µ—Ç (WeasyPrint)
‚îú‚îÄ‚îÄ character_compact_weasy.html      # –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –æ—Ç—á–µ—Ç (WeasyPrint)
‚îî‚îÄ‚îÄ themes/
    ‚îú‚îÄ‚îÄ professional.css              # –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ç–µ–º–∞
    ‚îú‚îÄ‚îÄ creative.css                  # –¢–≤–æ—Ä—á–µ—Å–∫–∞—è —Ç–µ–º–∞
    ‚îî‚îÄ‚îÄ minimal.css                   # –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è —Ç–µ–º–∞
```

## üéØ –¢–∏–ø—ã –æ—Ç—á–µ—Ç–æ–≤

### Detailed (–î–µ—Ç–∞–ª—å–Ω—ã–π)
- –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –≤—Å–µ–º –º–æ–¥—É–ª—è–º
- –í—Å–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã
- –°–æ–≤–µ—Ç—ã –∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –¥–ª—è –∞–∫—Ç–µ—Ä–æ–≤
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

### Summary (–ö—Ä–∞—Ç–∫–∏–π)
- –û–±–∑–æ—Ä –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ—Å—Ç–∏ –º–æ–¥—É–ª–µ–π
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
- –ö–æ–º–ø–∞–∫—Ç–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ

### Compact (–ö–æ–º–ø–∞–∫—Ç–Ω—ã–π)
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±–∑–æ—Ä–∞

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- WeasyPrint 61.2+ (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
- –°–∏—Å—Ç–µ–º–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
- Python 3.11+ (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
```bash
cd backend
python -c "
from app.services.export_service import export_service
print('‚úÖ Export service –≥–æ—Ç–æ–≤')
import weasyprint
print('‚úÖ WeasyPrint –¥–æ—Å—Ç—É–ø–µ–Ω')
"
```

## üé® –í–∏–∑—É–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- üü¢ **–ù–∞–π–¥–µ–Ω–æ –≤ —Ç–µ–∫—Å—Ç–µ** - –∑–µ–ª–µ–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç
- üü° **–õ–æ–≥–∏—á–µ—Å–∫–∏ –≤—ã–≤–µ–¥–µ–Ω–æ** - –æ—Ä–∞–Ω–∂–µ–≤—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç  
- üî¥ **–ü—Ä–∏–¥—É–º–∞–Ω–æ** - –∫—Ä–∞—Å–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç

### –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã
- –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ—Å—Ç–∏ –º–æ–¥—É–ª–µ–π
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è: –≤—ã—Å–æ–∫–∞—è/—Å—Ä–µ–¥–Ω—è—è/–Ω–∏–∑–∫–∞—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ—Å—Ç—å
- –ü—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

### –¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### WeasyPrint –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ ReportLab —Å –±–∞–∑–æ–≤—ã–º –¥–∏–∑–∞–π–Ω–æ–º.

### –û—à–∏–±–∫–∏ —à—Ä–∏—Ñ—Ç–æ–≤
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —à—Ä–∏—Ñ—Ç–æ–≤ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ.

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ–º–∞–º–∏
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª—ã —Ç–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –ø–∞–ø–∫–µ `themes/`.

---

*–û–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-08-15 - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ PDF —ç–∫—Å–ø–æ—Ä—Ç–∞*