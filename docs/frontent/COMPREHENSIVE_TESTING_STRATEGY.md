# üß™ –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

## –û–±–∑–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

–î–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–∫—Ä—ã–≤–∞–µ—Ç **–≤—Å–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:

```mermaid
graph TD
    A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏] --> B[Unit —Ç–µ—Å—Ç—ã 40%]
    A --> C[Integration —Ç–µ—Å—Ç—ã 40%]
    A --> D[E2E —Ç–µ—Å—Ç—ã 20%]
    
    B --> B1[–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã]
    B --> B2[–•—É–∫–∏]
    B --> B3[–£—Ç–∏–ª–∏—Ç—ã]
    
    C --> C1[API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è]
    C --> C2[–†–æ—É—Ç–∏–Ω–≥]
    C --> C3[–ö–æ–Ω—Ç–µ–∫—Å—Ç—ã]
    
    D --> D1[–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—É—Ç–∏]
    D --> D2[–ü–æ–ª–Ω—ã–µ —Ñ–ª–æ—É]
    D --> D3[–ö—Ä–æ—Å—Å–±—Ä–∞—É–∑–µ—Ä–Ω–æ—Å—Ç—å]
```

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ ‚úÖ
- **Vitest 0.34.6** - –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **React Testing Library 13.4.0** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **MSW 1.3.2** - –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ API
- **@testing-library/jest-dom 6.4.2** - DOM –º–∞—Ç—á–µ—Ä—ã
- **@faker-js/faker 8.4.1** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å üì¶
- **@playwright/test** - E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **@testing-library/react-hooks** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ö—É–∫–æ–≤
- **@axe-core/playwright** - accessibility —Ç–µ—Å—Ç—ã
- **@storybook/test-runner** - visual regression —Ç–µ—Å—Ç—ã

## üìã –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –§–∞–∑–∞ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π)

#### 1.1 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Playwright
```bash
npm install -D @playwright/test @axe-core/playwright
npx playwright install
```

#### 1.2 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Playwright
**–§–∞–π–ª: `playwright.config.ts`**
```typescript
import { defineConfig, devices } from '@playwright/test'

export default defineConfig({
  testDir: './src/tests/e2e',
  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,
  reporter: 'html',
  use: {
    baseURL: 'http://localhost:5173',
    trace: 'on-first-retry',
    screenshot: 'only-on-failure',
  },
  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'] },
    },
    {
      name: 'firefox',
      use: { ...devices['Desktop Firefox'] },
    },
    {
      name: 'webkit',
      use: { ...devices['Desktop Safari'] },
    },
    {
      name: 'mobile',
      use: { ...devices['iPhone 13'] },
    },
  ],
  webServer: {
    command: 'npm run dev',
    url: 'http://localhost:5173',
    reuseExistingServer: !process.env.CI,
  },
})
```

#### 1.3 –ë–∞–∑–æ–≤—ã–µ E2E —É—Ç–∏–ª–∏—Ç—ã
**–§–∞–π–ª: `src/tests/e2e/utils/test-helpers.ts`**
```typescript
import { Page, expect } from '@playwright/test'

export class TestHelpers {
  constructor(private page: Page) {}

  async login(email: string = 'test@example.com', password: string = 'password123') {
    await this.page.goto('/')
    await this.page.click('[data-testid="auth-button"]')
    await this.page.fill('[data-testid="email-input"]', email)
    await this.page.fill('[data-testid="password-input"]', password)
    await this.page.click('[data-testid="login-submit"]')
    await expect(this.page.locator('[data-testid="user-menu"]')).toBeVisible()
  }

  async createProject(name: string, description: string = '') {
    await this.page.click('[data-testid="create-project-button"]')
    await this.page.fill('[data-testid="project-name-input"]', name)
    if (description) {
      await this.page.fill('[data-testid="project-description-input"]', description)
    }
    await this.page.click('[data-testid="create-project-submit"]')
  }

  async uploadFile(filePath: string) {
    const fileInput = this.page.locator('input[type="file"]')
    await fileInput.setInputFiles(filePath)
    await this.page.click('[data-testid="upload-submit"]')
  }
}
```

### –§–∞–∑–∞ 2: E2E —Ç–µ—Å—Ç—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

#### 2.1 –¢–µ—Å—Ç—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
**–§–∞–π–ª: `src/tests/e2e/auth.spec.ts`**
```typescript
import { test, expect } from '@playwright/test'
import { TestHelpers } from './utils/test-helpers'

test.describe('–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è', () => {
  test('–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤—Ö–æ–¥–∞', async ({ page }) => {
    const helpers = new TestHelpers(page)
    
    // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
    await page.goto('/')
    await page.click('[data-testid="auth-button"]')
    await page.click('[data-testid="switch-to-register"]')
    
    await page.fill('[data-testid="username-input"]', 'testuser')
    await page.fill('[data-testid="email-input"]', 'test@example.com')
    await page.fill('[data-testid="password-input"]', 'SecurePass123!')
    await page.click('[data-testid="register-submit"]')
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—Ö–æ–¥–∞
    await expect(page.locator('[data-testid="user-menu"]')).toBeVisible()
    
    // –í—ã—Ö–æ–¥
    await page.click('[data-testid="user-menu"]')
    await page.click('[data-testid="logout-button"]')
    await expect(page.locator('[data-testid="auth-button"]')).toBeVisible()
    
    // –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—Ö–æ–¥
    await helpers.login('test@example.com', 'SecurePass123!')
  })

  test('–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤—Ö–æ–¥–∞', async ({ page }) => {
    await page.goto('/')
    await page.click('[data-testid="auth-button"]')
    
    // –ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    await page.fill('[data-testid="email-input"]', 'wrong@example.com')
    await page.fill('[data-testid="password-input"]', 'wrongpassword')
    await page.click('[data-testid="login-submit"]')
    
    await expect(page.locator('[data-testid="error-message"]')).toBeVisible()
  })
})
```

#### 2.2 –¢–µ—Å—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞–º–∏
**–§–∞–π–ª: `src/tests/e2e/projects.spec.ts`**
```typescript
import { test, expect } from '@playwright/test'
import { TestHelpers } from './utils/test-helpers'

test.describe('–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏', () => {
  let helpers: TestHelpers

  test.beforeEach(async ({ page }) => {
    helpers = new TestHelpers(page)
    await helpers.login()
  })

  test('–°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ–µ–∫—Ç–∞', async ({ page }) => {
    const projectName = `–¢–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç ${Date.now()}`
    
    // –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
    await helpers.createProject(projectName, '–û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞')
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ–µ–∫—Ç–∞
    await expect(page.locator('h1')).toContainText(projectName)
    
    // –í–æ–∑–≤—Ä–∞—Ç –∫ —Å–ø–∏—Å–∫—É –ø—Ä–æ–µ–∫—Ç–æ–≤
    await page.click('[data-testid="back-to-projects"]')
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Å–ø–∏—Å–∫–µ
    await expect(page.locator(`text=${projectName}`)).toBeVisible()
  })

  test('–ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤', async ({ page }) => {
    await page.goto('/')
    
    // –ü–æ–∏—Å–∫
    await page.fill('[data-testid="search-input"]', '–¢–µ—Å—Ç–æ–≤—ã–π')
    await expect(page.locator('[data-testid="project-card"]')).toHaveCount(1)
    
    // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
    await page.selectOption('[data-testid="filter-select"]', '–í —Ä–∞–±–æ—Ç–µ')
    await expect(page.locator('[data-testid="project-card"]')).toBeVisible()
  })

  test('–£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞', async ({ page }) => {
    // –°–æ–∑–¥–∞–µ–º –ø—Ä–æ–µ–∫—Ç –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
    const projectName = `–ü—Ä–æ–µ–∫—Ç –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è ${Date.now()}`
    await helpers.createProject(projectName)
    
    // –£–¥–∞–ª—è–µ–º –ø—Ä–æ–µ–∫—Ç
    await page.click('[data-testid="delete-project-button"]')
    await page.click('[data-testid="confirm-delete"]')
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å–ø–∏—Å–æ–∫
    await expect(page).toHaveURL('/')
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Å–ø–∏—Å–∫–µ
    await expect(page.locator(`text=${projectName}`)).not.toBeVisible()
  })
})
```

#### 2.3 –¢–µ—Å—Ç—ã —Ä–∞–±–æ—Ç—ã —Å —Ç–µ–∫—Å—Ç–∞–º–∏ –∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏
**–§–∞–π–ª: `src/tests/e2e/texts-and-characters.spec.ts`**
```typescript
import { test, expect } from '@playwright/test'
import { TestHelpers } from './utils/test-helpers'
import path from 'path'

test.describe('–†–∞–±–æ—Ç–∞ —Å —Ç–µ–∫—Å—Ç–∞–º–∏ –∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏', () => {
  let helpers: TestHelpers

  test.beforeEach(async ({ page }) => {
    helpers = new TestHelpers(page)
    await helpers.login()
    await helpers.createProject('–ü—Ä–æ–µ–∫—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤')
  })

  test('–ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞', async ({ page }) => {
    // –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
    const testFilePath = path.join(__dirname, 'fixtures', 'test-text.txt')
    await helpers.uploadFile(testFilePath)
    
    // –û–∂–∏–¥–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
    await expect(page.locator('[data-testid="processing-indicator"]')).toBeVisible()
    await expect(page.locator('[data-testid="processed-text"]')).toBeVisible({ timeout: 30000 })
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
    await expect(page.locator('[data-testid="character-item"]')).toHaveCount.greaterThan(0)
  })

  test('–ü–µ—Ä–µ—Ö–æ–¥ –∫ –∞–Ω–∞–ª–∏–∑—É –ø–µ—Ä—Å–æ–Ω–∞–∂–∞', async ({ page }) => {
    // –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ —Ç–µ–∫—Å—Ç —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω
    await page.click('[data-testid="character-item"]')
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —á–µ–∫-–ª–∏—Å—Ç–∞–º
    await expect(page).toHaveURL(/\/characters\/\d+\/checklists/)
    await expect(page.locator('[data-testid="checklists-overview"]')).toBeVisible()
  })
})
```

#### 2.4 –¢–µ—Å—Ç—ã —Ä–∞–±–æ—Ç—ã —Å —á–µ–∫-–ª–∏—Å—Ç–∞–º–∏
**–§–∞–π–ª: `src/tests/e2e/checklists.spec.ts`**
```typescript
import { test, expect } from '@playwright/test'
import { TestHelpers } from './utils/test-helpers'

test.describe('–†–∞–±–æ—Ç–∞ —Å —á–µ–∫-–ª–∏—Å—Ç–∞–º–∏', () => {
  let helpers: TestHelpers

  test.beforeEach(async ({ page }) => {
    helpers = new TestHelpers(page)
    await helpers.login()
    // –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º –Ω–∞–ª–∏—á–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º
    await page.goto('/characters/1/checklists')
  })

  test('–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —á–µ–∫-–ª–∏—Å—Ç–∞–º', async ({ page }) => {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–±–∑–æ—Ä–∞
    await expect(page.locator('[data-testid="checklists-overview"]')).toBeVisible()
    await expect(page.locator('[data-testid="overall-progress"]')).toBeVisible()
    
    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —á–µ–∫-–ª–∏—Å—Ç–∞
    await page.click('[data-testid="checklist-switcher"]')
    await page.click('[data-testid="checklist-option"]:first-child')
    
    // –ü–µ—Ä–µ—Ö–æ–¥ –∫ –¥–µ—Ç–∞–ª—å–Ω–æ–º—É –ø—Ä–æ—Å–º–æ—Ç—Ä—É
    await page.click('[data-testid="checklist-item"]:first-child')
    await expect(page).toHaveURL(/\/checklists\/[^\/]+$/)
  })

  test('–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤ —á–µ–∫-–ª–∏—Å—Ç–∞', async ({ page }) => {
    // –ü–µ—Ä–µ—Ö–æ–¥ –∫ –ø–µ—Ä–≤–æ–º—É –≤–æ–ø—Ä–æ—Å—É
    await page.click('[data-testid="checklist-item"]:first-child')
    
    // –¢–µ–∫—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å
    await page.fill('[data-testid="answer-textarea"]', '–¢–µ—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å')
    await page.fill('[data-testid="comment-textarea"]', '–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –æ—Ç–≤–µ—Ç—É')
    await page.click('[data-testid="save-button"]')
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
    await expect(page.locator('[data-testid="save-status"]')).toContainText('–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ')
    
    // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É
    await page.click('[data-testid="next-question"]')
    
    // –í–æ–ø—Ä–æ—Å —Å –≤—ã–±–æ—Ä–æ–º
    await page.click('[data-testid="radio-option"]:first-child')
    
    // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å—Ä–∞–±–æ—Ç–∞—Ç—å
    await expect(page.locator('[data-testid="save-status"]')).toContainText('–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ')
  })

  test('–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º', async ({ page }) => {
    await page.click('[data-testid="checklist-item"]:first-child')
    
    // –û—Ç–∫—Ä—ã—Ç–∏–µ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏
    await page.click('[data-testid="toggle-sidebar"]')
    await expect(page.locator('[data-testid="navigation-sidebar"]')).toBeVisible()
    
    // –ü–æ–∏—Å–∫ –≤–æ–ø—Ä–æ—Å–æ–≤
    await page.fill('[data-testid="search-questions"]', '–≤–Ω–µ—à–Ω–æ—Å—Ç—å')
    await expect(page.locator('[data-testid="question-link"]')).toHaveCount.greaterThan(0)
    
    // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–µ–æ—Ç–≤–µ—á–µ–Ω–Ω—ã—Ö
    await page.click('[data-testid="filter-unanswered"]')
    
    // –ü–µ—Ä–µ—Ö–æ–¥ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –≤–æ–ø—Ä–æ—Å—É
    await page.click('[data-testid="question-link"]:first-child')
    await expect(page.locator('[data-testid="question-card"]')).toBeVisible()
    
    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–ª–∞–¥–∫–∏
    await page.click('[data-testid="bookmark-question"]')
    await expect(page.locator('[data-testid="bookmark-indicator"]')).toBeVisible()
  })

  test('–ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è', async ({ page }) => {
    await page.click('[data-testid="checklist-item"]:first-child')
    
    // –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å—Ç—Ä–µ–ª–∫–∞–º–∏
    await page.keyboard.press('ArrowRight')
    await expect(page.locator('[data-testid="question-card"]')).toBeVisible()
    
    await page.keyboard.press('ArrowLeft')
    await expect(page.locator('[data-testid="question-card"]')).toBeVisible()
    
    // –ë—ã—Å—Ç—Ä—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã
    await page.keyboard.press('Home')
    await page.keyboard.press('End')
    
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
    await page.keyboard.press('Control+S')
  })
})
```

#### 2.5 –¢–µ—Å—Ç—ã —ç–∫—Å–ø–æ—Ä—Ç–∞
**–§–∞–π–ª: `src/tests/e2e/export.spec.ts`**
```typescript
import { test, expect } from '@playwright/test'
import { TestHelpers } from './utils/test-helpers'

test.describe('–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö', () => {
  let helpers: TestHelpers

  test.beforeEach(async ({ page }) => {
    helpers = new TestHelpers(page)
    await helpers.login()
    await page.goto('/characters/1/checklists')
  })

  test('–≠–∫—Å–ø–æ—Ä—Ç –≤ PDF', async ({ page }) => {
    // –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–∏–∞–ª–æ–≥–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞
    await page.click('[data-testid="export-button"]')
    await expect(page.locator('[data-testid="export-dialog"]')).toBeVisible()
    
    // –í—ã–±–æ—Ä —Ñ–æ—Ä–º–∞—Ç–∞ PDF
    await page.click('[data-testid="format-pdf"]')
    
    // –í—ã–±–æ—Ä —Ç–∏–ø–∞ –æ—Ç—á–µ—Ç–∞
    await page.click('[data-testid="report-detailed"]')
    
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏
    await page.check('[data-testid="include-comments"]')
    
    // –ó–∞–ø—É—Å–∫ —ç–∫—Å–ø–æ—Ä—Ç–∞
    const downloadPromise = page.waitForEvent('download')
    await page.click('[data-testid="export-submit"]')
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
    const download = await downloadPromise
    expect(download.suggestedFilename()).toMatch(/\.pdf$/)
  })

  test('–≠–∫—Å–ø–æ—Ä—Ç –≤ DOCX', async ({ page }) => {
    await page.click('[data-testid="export-button"]')
    
    // –í—ã–±–æ—Ä DOCX –∏ –∫—Ä–∞—Ç–∫–æ–≥–æ –æ—Ç—á–µ—Ç–∞
    await page.click('[data-testid="format-docx"]')
    await page.click('[data-testid="report-summary"]')
    
    const downloadPromise = page.waitForEvent('download')
    await page.click('[data-testid="export-submit"]')
    
    const download = await downloadPromise
    expect(download.suggestedFilename()).toMatch(/\.docx$/)
  })

  test('–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —ç–∫—Å–ø–æ—Ä—Ç–∞', async ({ page }) => {
    // –ú–æ–∫–∏—Ä—É–µ–º –æ—à–∏–±–∫—É —Å–µ—Ä–≤–µ—Ä–∞
    await page.route('**/api/export/**', route => {
      route.fulfill({ status: 500, body: 'Server Error' })
    })
    
    await page.click('[data-testid="export-button"]')
    await page.click('[data-testid="format-pdf"]')
    await page.click('[data-testid="export-submit"]')
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–∫–∏
    await expect(page.locator('[data-testid="error-message"]')).toBeVisible()
  })
})
```

### –§–∞–∑–∞ 3: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ Unit –∏ Integration —Ç–µ—Å—Ç–æ–≤

#### 3.1 –ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è unit —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```typescript
// –°–ø–∏—Å–æ–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- ChecklistGroup ‚ùå
- ChecklistsOverview ‚ùå  
- ChecklistSwitcher ‚ùå
- ExportDialog ‚ùå
- NavigationSidebar ‚ùå
- OverallProgress ‚ùå
- ProgressBar ‚ùå
- QuestionFlow ‚ùå
- QuestionNavigation ‚ùå
- Header ‚ùå
- ChangePasswordForm ‚ùå
- CharacterAnalysis ‚ùå
```

#### 3.2 –ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞ –¥–ª—è ChecklistGroup
**–§–∞–π–ª: `src/tests/components/checklists/ChecklistGroup.test.tsx`**
```typescript
import { describe, it, expect, vi } from 'vitest'
import { render, screen } from '../../utils/test-utils'
import { ChecklistGroup } from '../../../components/checklists/ChecklistGroup'
import { createMockChecklist } from '../../utils/mock-data'

describe('ChecklistGroup', () => {
  const mockProps = {
    title: '–§–∏–∑–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—Ç—Ä–µ—Ç',
    checklists: [
      createMockChecklist({ title: '–û—Å–Ω–æ–≤–Ω—ã–µ —á–µ—Ä—Ç—ã', progress: 75 }),
      createMockChecklist({ title: '–î–µ—Ç–∞–ª–∏ –≤–Ω–µ—à–Ω–æ—Å—Ç–∏', progress: 50 })
    ],
    characterId: 1,
    isUnlocked: true
  }

  it('–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≥—Ä—É–ø–ø—ã', () => {
    render(<ChecklistGroup {...mockProps} />)
    expect(screen.getByText('–§–∏–∑–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—Ç—Ä–µ—Ç')).toBeInTheDocument()
  })

  it('–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –≥—Ä—É–ø–ø—ã', () => {
    render(<ChecklistGroup {...mockProps} />)
    // –°—Ä–µ–¥–Ω–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å: (75 + 50) / 2 = 62.5%
    expect(screen.getByText('62%')).toBeInTheDocument()
  })

  it('–±–ª–æ–∫–∏—Ä—É–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –≥—Ä—É–ø–ø—ã', () => {
    render(<ChecklistGroup {...mockProps} isUnlocked={false} />)
    expect(screen.getByTestId('locked-group')).toBeInTheDocument()
  })

  it('–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–ª–∏–∫ –ø–æ —á–µ–∫-–ª–∏—Å—Ç—É', async () => {
    const user = userEvent.setup()
    render(<ChecklistGroup {...mockProps} />)
    
    const checklistLink = screen.getByText('–û—Å–Ω–æ–≤–Ω—ã–µ —á–µ—Ä—Ç—ã')
    await user.click(checklistLink)
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é (—á–µ—Ä–µ–∑ –º–æ–∫ —Ä–æ—É—Ç–µ—Ä–∞)
    expect(mockNavigate).toHaveBeenCalledWith('/characters/1/checklists/osnovnye-cherty')
  })
})
```

#### 3.3 Integration —Ç–µ—Å—Ç—ã —Å—Ç—Ä–∞–Ω–∏—Ü
**–§–∞–π–ª: `src/tests/pages/CreateProject.test.tsx`**
```typescript
import { describe, it, expect, vi } from 'vitest'
import { render, screen, waitFor } from '../utils/test-utils'
import userEvent from '@testing-library/user-event'
import CreateProject from '../../pages/CreateProject'

describe('CreateProject Page', () => {
  it('—Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç', async () => {
    const user = userEvent.setup()
    render(<CreateProject />)
    
    // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã
    await user.type(screen.getByLabelText(/–Ω–∞–∑–≤–∞–Ω–∏–µ/i), '–ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç')
    await user.type(screen.getByLabelText(/–æ–ø–∏—Å–∞–Ω–∏–µ/i), '–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞')
    
    // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã
    await user.click(screen.getByRole('button', { name: /—Å–æ–∑–¥–∞—Ç—å/i }))
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ API –≤—ã–∑–æ–≤–∞
    await waitFor(() => {
      expect(mockCreateProject).toHaveBeenCalledWith({
        title: '–ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç',
        description: '–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞'
      })
    })
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    expect(mockNavigate).toHaveBeenCalledWith('/projects/123')
  })

  it('–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏', async () => {
    const user = userEvent.setup()
    render(<CreateProject />)
    
    // –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å –±–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è
    await user.click(screen.getByRole('button', { name: /—Å–æ–∑–¥–∞—Ç—å/i }))
    
    expect(screen.getByText(/–Ω–∞–∑–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ/i)).toBeInTheDocument()
  })
})
```

### –§–∞–∑–∞ 4: Accessibility –∏ Performance —Ç–µ—Å—Ç—ã

#### 4.1 Accessibility —Ç–µ—Å—Ç—ã
**–§–∞–π–ª: `src/tests/e2e/accessibility.spec.ts`**
```typescript
import { test, expect } from '@playwright/test'
import AxeBuilder from '@axe-core/playwright'

test.describe('Accessibility', () => {
  test('–≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç WCAG', async ({ page }) => {
    await page.goto('/')
    
    const accessibilityScanResults = await new AxeBuilder({ page }).analyze()
    expect(accessibilityScanResults.violations).toEqual([])
  })

  test('—Å—Ç—Ä–∞–Ω–∏—Ü–∞ —á–µ–∫-–ª–∏—Å—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω–∞', async ({ page }) => {
    // –õ–æ–≥–∏–Ω –∏ –ø–µ—Ä–µ—Ö–æ–¥ –∫ —á–µ–∫-–ª–∏—Å—Ç—É
    await page.goto('/characters/1/checklists/physical-portrait')
    
    const accessibilityScanResults = await new AxeBuilder({ page })
      .withTags(['wcag2a', 'wcag2aa'])
      .analyze()
    
    expect(accessibilityScanResults.violations).toEqual([])
  })

  test('–∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç', async ({ page }) => {
    await page.goto('/characters/1/checklists/physical-portrait')
    
    // –ù–∞–≤–∏–≥–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
    await page.keyboard.press('Tab')
    await page.keyboard.press('Tab')
    await page.keyboard.press('Enter')
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ–∫—É—Å–∞
    const focusedElement = await page.locator(':focus')
    await expect(focusedElement).toBeVisible()
  })
})
```

### –§–∞–∑–∞ 5: CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

#### 5.1 GitHub Actions workflow
**–§–∞–π–ª: `.github/workflows/frontend-e2e-tests.yml`**
```yaml
name: Frontend E2E Tests

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  e2e-tests:
    timeout-minutes: 60
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'
        cache-dependency-path: frontend/package-lock.json
    
    - name: Install dependencies
      working-directory: ./frontend
      run: npm ci
    
    - name: Install Playwright Browsers
      working-directory: ./frontend
      run: npx playwright install --with-deps
    
    - name: Run unit tests
      working-directory: ./frontend
      run: npm run test:run
    
    - name: Build frontend
      working-directory: ./frontend
      run: npm run build
    
    - name: Run E2E tests
      working-directory: ./frontend
      run: npm run test:e2e
    
    - uses: actions/upload-artifact@v4
      if: always()
      with:
        name: playwright-report
        path: frontend/playwright-report/
        retention-days: 30
    
    - name: Upload coverage reports
      uses: codecov/codecov-action@v3
      with:
        file: ./frontend/coverage/lcov.info
        flags: frontend
```

#### 5.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ package.json
```json
{
  "scripts": {
    "test:e2e": "playwright test",
    "test:e2e:ui": "playwright test --ui",
    "test:e2e:debug": "playwright test --debug",
    "test:all": "npm run test:run && npm run test:e2e"
  }
}
```

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å

### –¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø–æ–∫—Ä—ã—Ç–∏—è
- **Unit —Ç–µ—Å—Ç—ã**: 90% –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Integration —Ç–µ—Å—Ç—ã**: 85% –ø–æ–∫—Ä—ã—Ç–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü
- **E2E —Ç–µ—Å—Ç—ã**: 100% –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- **Accessibility**: 0 –Ω–∞—Ä—É—à–µ–Ω–∏–π WCAG 2.1 AA

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã
1. **Coverage –æ—Ç—á–µ—Ç—ã** - –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
2. **E2E –æ—Ç—á–µ—Ç—ã** - HTML –æ—Ç—á–µ—Ç—ã Playwright
3. **Accessibility –æ—Ç—á–µ—Ç—ã** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã axe-core
4. **Performance –º–µ—Ç—Ä–∏–∫–∏** - –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤

## üöÄ –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### –ù–µ–¥–µ–ª—è 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Playwright
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö E2E —É—Ç–∏–ª–∏—Ç
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD pipeline

### –ù–µ–¥–µ–ª—è 2: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ E2E —Ç–µ—Å—Ç—ã
- [ ] –¢–µ—Å—Ç—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- [ ] –¢–µ—Å—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞–º–∏
- [ ] –¢–µ—Å—Ç—ã –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤

### –ù–µ–¥–µ–ª—è 3: –û—Å–Ω–æ–≤–Ω—ã–µ E2E —Ç–µ—Å—Ç—ã
- [ ] –¢–µ—Å—Ç—ã —Ä–∞–±–æ—Ç—ã —Å —á–µ–∫-–ª–∏—Å—Ç–∞–º–∏
- [ ] –¢–µ—Å—Ç—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- [ ] –¢–µ—Å—Ç—ã —ç–∫—Å–ø–æ—Ä—Ç–∞

### –ù–µ–¥–µ–ª—è 4: Unit —Ç–µ—Å—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö checklist –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ auth –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç

### –ù–µ–¥–µ–ª—è 5: Integration —Ç–µ—Å—Ç—ã
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–æ—É—Ç–∏–Ω–≥–∞

### –ù–µ–¥–µ–ª—è 6: –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- [ ] Accessibility —Ç–µ—Å—Ç—ã
- [ ] Performance —Ç–µ—Å—Ç—ã
- [ ] Edge cases –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø—Ä–æ–µ–∫—Ç –±—É–¥–µ—Ç –∏–º–µ—Ç—å:

‚úÖ **100% –ø–æ–∫—Ä—ã—Ç–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤**  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–∞–∂–¥—ã–π PR**  
‚úÖ **–ö—Ä–æ—Å—Å–±—Ä–∞—É–∑–µ—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**  
‚úÖ **Accessibility compliance**  
‚úÖ **–ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**  
‚úÖ **–í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏ –ø–æ–∑–≤–æ–ª–∏—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ —Ä–∞–∑–≤–∏–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.